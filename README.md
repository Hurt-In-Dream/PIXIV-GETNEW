# Pixiv-Vercel-Sync

ğŸ¨ **ä¸€ä¸ªéƒ¨ç½²åœ¨ Vercel ä¸Šçš„ Pixiv å›¾ç‰‡è‡ªåŠ¨æŠ“å–ã€æ™ºèƒ½ç­›é€‰ä¸ R2 åˆ†å‘ç³»ç»Ÿã€‚**

æœ¬é¡¹ç›®æ—¨åœ¨æ‰“é€ ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„é«˜è´¨é‡äºŒæ¬¡å…ƒèƒŒæ™¯å›¾åº“ï¼Œæ”¯æŒè‡ªåŠ¨æŠ“å– Pixiv æ¯æ—¥æ’è¡Œæ¦œã€å¯é€‰æ ‡ç­¾æœç´¢ã€æ™ºèƒ½è¿‡æ»¤éèƒŒæ™¯ç±»å›¾ç‰‡ã€è‡ªåŠ¨å¹³è¡¡æ¨ªç«–å±æ¯”ä¾‹ï¼Œå¹¶è½¬å­˜è‡³ Cloudflare R2ã€‚

![Next.js](https://img.shields.io/badge/Next.js-14+-black?style=flat-square&logo=next.js)
![TypeScript](https://img.shields.io/badge/TypeScript-5.0+-blue?style=flat-square&logo=typescript)
![Supabase](https://img.shields.io/badge/Supabase-PostgreSQL-green?style=flat-square&logo=supabase)
![Cloudflare](https://img.shields.io/badge/Cloudflare-R2-orange?style=flat-square&logo=cloudflare)

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ¤– å…¨è‡ªåŠ¨è¿è¡Œ
é€šè¿‡ Vercel Cron å®šæ—¶è§¦å‘ï¼Œæ— éœ€äººå·¥å¹²é¢„ï¼Œè‡ªåŠ¨ä» Pixiv æ’è¡Œæ¦œæŠ“å–é«˜è´¨é‡å›¾ç‰‡ã€‚

### ğŸ“Š åŒæ¨¡å¼æŠ“å–
- **æ’è¡Œæ¦œæ¨¡å¼ (é»˜è®¤)**: ä» `ranking.php` è·å–æ¯æ—¥çƒ­é—¨ä½œå“ï¼Œè´¨é‡æœ‰ä¿è¯
- **æ ‡ç­¾æœç´¢æ¨¡å¼ (å¯é€‰)**: æŒ‰æŒ‡å®šæ ‡ç­¾æœç´¢ç‰¹å®šå†…å®¹ (å¦‚é£æ™¯ã€è§’è‰²)ï¼Œå­˜å‚¨åˆ°ç‹¬ç«‹æ–‡ä»¶å¤¹

### ğŸ§  æ™ºèƒ½ç­›é€‰
- **èƒŒæ™¯ä¼˜åŒ–**: è‡ªåŠ¨è¿‡æ»¤é€æ˜èƒŒæ™¯ã€çº¯è‰²èƒŒæ™¯ã€è‰ç¨¿ã€è®¾å®šå›¾
- **å†…å®¹ç²¾é€‰**: è‡ªåŠ¨è·³è¿‡æ¼«ç”»ã€Log æ±‡æ€»ã€AI ç”Ÿæˆã€VTuberã€åƒç´ ç”»ç­‰
- **æ¯”ä¾‹å¹³è¡¡**: è‡ªåŠ¨ç»´æŒæ¨ªå± : ç«–å± = 1.5 : 1 çš„æ¯”ä¾‹ (ä¼˜å…ˆæ¨ªå±)
- **å¯è‡ªå®šä¹‰è¿‡æ»¤**: åœ¨ç®¡ç†é¢æ¿æ·»åŠ /åˆ é™¤è¿‡æ»¤æ ‡ç­¾

### â˜ï¸ R2 åˆ†ç±»å­˜å‚¨
```
your-r2-bucket/
â”œâ”€â”€ h/                    # æ’è¡Œæ¦œæ¨ªå±å›¾ç‰‡
â”œâ”€â”€ v/                    # æ’è¡Œæ¦œç«–å±å›¾ç‰‡
â”œâ”€â”€ R18/h/                # R18æ’è¡Œæ¦œæ¨ªå±
â”œâ”€â”€ R18/v/                # R18æ’è¡Œæ¦œç«–å±
â”œâ”€â”€ tag/h/                # æ ‡ç­¾æœç´¢æ¨ªå±
â”œâ”€â”€ tag/v/                # æ ‡ç­¾æœç´¢ç«–å±
â”œâ”€â”€ pid/h/                # PIDæŠ“å–æ¨ªå±
â”œâ”€â”€ pid/v/                # PIDæŠ“å–ç«–å±
â””â”€â”€ R18/tag/h/, R18/tag/v/   # R18æ ‡ç­¾æœç´¢
```

### ğŸ“± ç²¾ç¾ç®¡ç†é¢æ¿
- å®æ—¶æ´»åŠ¨æ—¥å¿—ï¼ˆæ•°æ®åº“æŒä¹…åŒ–ï¼Œåˆ·æ–°ä¸ä¸¢å¤±ï¼‰
- å¯è§†åŒ–è®¾ç½®ï¼ˆæŠ“å–æ•°é‡æ»‘å—ã€å¼€å…³æ§åˆ¶ï¼‰
- è‡ªå®šä¹‰è¿‡æ»¤æ ‡ç­¾ç®¡ç†è¡¨æ ¼
- R-18 å†…å®¹éœ€éªŒè¯ç è§£é”

---

## ğŸ“– æ–‡æ¡£æŒ‡å—

1.  **[ç¯å¢ƒå˜é‡è·å–](./docs/env-vars.md)** - *ç¬¬ä¸€æ­¥ï¼šè·å– Supabaseã€R2 å’Œ Pixiv çš„æ‰€æœ‰å¯†é’¥*
2.  **[éƒ¨ç½²æ•™ç¨‹](./docs/deployment.md)** - *ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–æ•°æ®åº“å¹¶éƒ¨ç½²åˆ° Vercel*
3.  **[ä½¿ç”¨æ‰‹å†Œ](./docs/usage.md)** - *ç¬¬ä¸‰æ­¥ï¼šäº†è§£å¦‚ä½•ä½¿ç”¨ç®¡ç†é¢æ¿å’Œç³»ç»Ÿé€»è¾‘*

---

## ğŸ“¦ æŠ€æœ¯æ ˆ

| åˆ†ç±» | æŠ€æœ¯ |
|------|------|
| å‰ç«¯ | Next.js 14 (App Router), Tailwind CSS, Lucide Icons |
| åç«¯ | Next.js API Routes (Edge/Serverless) |
| æ•°æ®åº“ | Supabase (PostgreSQL) |
| å­˜å‚¨ | Cloudflare R2 (S3 å…¼å®¹) |
| çˆ¬è™« | Axios + Pixiv AJAX API |

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
pixiv-vercel-sync/
â”œâ”€â”€ docs/                 # è¯¦ç»†æ–‡æ¡£
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/              # é¡µé¢ä¸ API è·¯ç”±
â”‚   â”‚   â””â”€â”€ api/          # cron, crawl, images, logs, settings, skip-tags
â”‚   â”œâ”€â”€ components/       # UI ç»„ä»¶ (SettingsPanel, LogViewer, SkipTagsManager ç­‰)
â”‚   â””â”€â”€ lib/              # æ ¸å¿ƒé€»è¾‘
â”‚       â”œâ”€â”€ pixiv/        # Pixiv API å°è£…
â”‚       â”œâ”€â”€ r2.ts         # R2 ä¸Šä¼ ä¸è·¯å¾„ç”Ÿæˆ
â”‚       â”œâ”€â”€ transfer.ts   # å›¾ç‰‡å¤„ç†ä¸ç­›é€‰é€»è¾‘
â”‚       â””â”€â”€ supabase.ts   # æ•°æ®åº“æ“ä½œ
â”œâ”€â”€ supabase/             # æ•°æ®åº“ schema
â”œâ”€â”€ vercel.json           # Vercel Cron é…ç½®
â””â”€â”€ README.md
```

---

## âš ï¸ å…è´£å£°æ˜

1.  æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ ç ”ç©¶ä½¿ç”¨ï¼Œè¯·å‹¿ç”¨äºå•†ä¸šç”¨é€”ã€‚
2.  å›¾ç‰‡ç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ï¼Œè¯·å°Šé‡ç”»å¸ˆåŠ³åŠ¨æˆæœã€‚
3.  è¯·éµå®ˆ Pixiv æœåŠ¡æ¡æ¬¾ï¼Œåˆç†æ§åˆ¶æŠ“å–é¢‘ç‡ã€‚

---

Made with â¤ï¸ for anime lovers.
